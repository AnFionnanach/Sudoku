<!DOCTYPE html>
<html>
		
	<body>

		<h1>Sudoku Cracker</h1>
		
		<script src="js/Cell.js"></script>
		<script src="js/isFinished.js"></script>
		<script src="js/boardFunctions.js"></script>
		<script src="js/algorithm.js"></script>

		<script>
		
			var board = new Array();
			var initialise = function(board) {
				var solution = new Array();
				solution[0] = ["","2","8","","","6","","",""];
				solution[1] = ["","3","6","","4","","","",""];
				solution[2] = ["","","","","","","2","","8"];
				solution[3] = ["","","","9","","","4","1",""];
				solution[4] = ["","","","5","","","","","3"];
				solution[5] = ["","","","6","","","8","7",""];
				solution[6] = ["","","","","","","3","","7"];
				solution[7] = ["","8","1","","9","","","",""];
				solution[8] = ["","4","2","","","7","","",""];

				for (var x = 0; x < 9; x++) {
					board[x] = new Array();
					for (var y = 0; y < 9; y++) {
                                            board[x][y] = new Cell(x, y);
                                            if (solution[x][y] !== "") {
                                                board[x][y].setValue(solution[x][y]);
                                            };
					};
				};
			};
						
			var crackIt = function(board) {
                            // for each cell on the board
                            for (var i = 0; i < 9; i++) {
                                for (var j = 0; j < 9; j++) {
                                    var cell = board[i][j];
                                    // if it's a single value - remove that value from all other buddies
                                    if (cell.candidates.length === 1) {
                                        removeCandidate(board[i][j].candidates, getBuddiesExCell(i, j, board));
                                    };
                                    // if it's a pair, than check if it's a point pair for a column or row
                                    if (cell.candidates.length == 2) {
                                        // pairs in square
                                        if (isPointingPair(cell, getSquareExCell(i, j, board))) {
                                            
                                        };
                                        if (isPointingPair(cell, getRowExCell(i, j, board))) {
                                            
                                        };
                                        if (isPointingPair(cell, getColumnExCell(i, j, board))) {
                                            
                                        };
                                    };
                                    // check if it's a hidden single - in a row, column or square
                                    if (cell.candidates.length > 1) {
                                        // hidden single in square
                                        var value = hasHiddenSingle(cell, getSquareExCell(i, j, board));
                                        if (value !== "0") {
                                            cell.setValue(value);
                                        };
                                        // hidden single in row
                                        var value = hasHiddenSingle(cell, getRowExCell(i, j, board));
                                        if (value !== "0") {
                                            cell.setValue(value);
                                        };
                                        // hidden single in column
                                        var value = hasHiddenSingle(cell, getColumnExCell(i, j, board));
                                        if (value !== "0") {
                                            cell.setValue(value);
                                        };
                                    };
                                };
                            };
                            // check it's a pair of pairs in a square
                            // roll out the big guns - XY Wing!
                      
			};

			var display = function(board) {
                            var spaces = "%20%20%20%20%20%20%20%20";
				for (var x = 0; x < board.length; x++) {
					document.write("| ");
					for (var y = 0; y < board[x].length; y++) {
						document.write(board[x][y].candidates + spaces.substring(9 - board[x][y].candidates.length) + " |");
					};
					document.write("<br/>");
				};
			};
			
			var puzzle = new Array();
			
			initialise(puzzle);
			  
			var finished = false;
                        var iteration = 1;
			while (!finished) {
				crackIt(puzzle);
				finished = isFinished(puzzle);
                                document.write("<br/>Iteration: " + iteration + "<br/>");
				display(puzzle);
                                iteration++;
                                if (iteration > 10) {
                                    break;
                                };
			};

			
			
		</script>
	</body>
</html> 